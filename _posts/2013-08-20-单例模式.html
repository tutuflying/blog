---
layout: default
title: 单例模式
---
<style type="text/css">
	#container div{width: 100px;height: 100px;background: red;}
</style>
<h1>{{ page.title }}</h1>
<h2></h2>
<p>利用闭包实现</p>
<pre>
	<code>
		var singleton = function(fn){
			var result;
			return function(){
				return result || (result = fn.apply(this, arguments));
			}
		}

		var div = singleton(function(){
			return document.getElementById("container").appendChild(document.createElement("div"));
		});
		document.getElementById("add").onclick = function(){
			div();
		}
	</code>	
</pre>
<p>添加一个div元素<button id="add">add</button></p>
<div id="container">

</div>
<script type="text/javascript">
	var singleton = function(fn){
		var result;
		return function(){
			return result || (result = fn.apply(this, arguments));
		}
	}

	var div = singleton(function(){
		return document.getElementById("container").appendChild(document.createElement("div"));
	});
	document.getElementById("add").onclick = function(){
		div();
	}
</script>